<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Список студентов</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link href="./vendor/bootstrap.css" rel="stylesheet" />
    <link href="./css/fontello.css" rel="stylesheet" />
    <link href="./css/animation.css" rel="stylesheet" />
    <link href="./css/style.css" rel="stylesheet" />
    
    <script href="./vendor/jquery-2.2.4.min.js"></script>
    <script src="./vendor/bootstrap.js"></script>
    <script src="http://localhost:8098"></script> <!-- For Vue dev-tools app (Electron engine) -->
</head>
<body>    
    <div id="app"> <!-- Mounting Vue -->
        <div class="container">
            <div class="row">
                <h2>Список студентов <small>({{filteredOutput}}: {{numberOfStudents}} чел.)</small></h2> <!-- Showing number of students -->
                <div class="alert alert-danger" v-if="errors.length">
                    <ul>
                        <li v-for="error in errors">{{error}}</li> <!-- Showing errors of form fields validation -->
                    </ul>
                </div>

                <div class="col-md-3"> <!-- Right side of page - the form -->
                    <form name="studentForm">
                        <input type="hidden" v-model="form.id" />
                        <div class="form-group">
                            <label for="uniqid">Уникальный идентификатор:</label>
                            <input class="form-control" v-model="form.uniqId" type="text" placeholder="от 6 до 16 знаков или пустое поле" />
                        </div>
                        <div class="form-group">
                            <label for="name">Имя:</label>
                            <input class="form-control" v-model="form.name" type="text" placeholder="обязательное поле" />
                        </div>
                        <div class="form-group">
                            <label for="middlename">Отчество:</label>
                            <input class="form-control" v-model="form.middleName" type="text" />
                        </div>
                        <div class="form-group">
                            <label for="lastname">Фамилия:</label>
                            <input class="form-control" v-model="form.lastName" type="text" placeholder="обязательное поле" />
                        </div>
                        <div class="form-group" data-toggle="buttons">
                            <label for="gender">Пол (обяз.):</label>
                            муж. <input type="radio" value="male" v-model="form.gender" />
                            жен. <input type="radio" value="female" v-model="form.gender" />
                        </div>
                        <div class="panel-body">
                            <button type="button" class="btn btn-sm btn-primary" v-on:click="submitFunc">Сохранить</button>
                            <button type="button" class="btn btn-sm btn-primary" v-on:click="reset">Сбросить</button>
                        </div>
                    </form>                    
                </div>

                <div class="col-md-9"> <!-- Left side of page - the list of students -->
                    <h4>Пример фильтра: </h4>
                    <div class="btn-group" role="group" aria-label="..."> <!-- The example of filtering list by gender -->
                        <button type="button" class="btn btn-default" v-on:click="getStudents">Все</button>
                        <button type="button" class="btn btn-default" v-on:click="filterAndSorting('male')">Муж.</button>
                        <button type="button" class="btn btn-default" v-on:click="filterAndSorting('female')">Жен.</button>
                    </div>

                    <section id="error-message" v-if="errored"> <!-- Showing errors of downloading students list -->
                        <p>Запрос вернул ошибку</p>
                    </section>

                    <section v-else>
                        <div v-if="loading"><i class="icon-spinner animate-spin"></i> Loading...</div> <!-- Displaying the process of loading data -->
                    </section>

                    <table class="table table-condensed table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Уник. ID <a v-on:click="filterAndSorting('uniqid')">^</a> / <a v-on:click="filterAndSorting('uniqid_desc')">v</a></th>
                                <th>Имя <a v-on:click="filterAndSorting('name')">^</a> / <a v-on:click="filterAndSorting('name_desc')">v</a></th>
                                <th>Отчество <a v-on:click="filterAndSorting('middlename')">^</a> / <a v-on:click="filterAndSorting('middlename_desc')">v</a></th>
                                <th>Фамилия <a v-on:click="filterAndSorting('lastname')">^</a> / <a v-on:click="filterAndSorting('lastname_desc')">v</a></th>
                                <th>Пол <a v-on:click="filterAndSorting('gender')">^</a> / <a v-on:click="filterAndSorting('gender_desc')">v</a></th>
                                <th>Действия</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr v-for="student in studentsList" v-bind:key="student.id">
                                <td>{{student.uniqId}}</td>
                                <td>{{student.name}}</td>
                                <td>{{student.middleName}}</td>
                                <td>{{student.lastName}}</td>
                                <td>{{student.gender}}</td>
                                <td>
                                    <button type="button">
                                        <i class="icon-pencil" v-on:click="getStudent(student.id)" title="Редактировать"></i>
                                    </button>
                                    <button type="button">
                                        <i class="icon-user-times" v-on:click="deleteStudent(student.id)" title="Удалить"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script src="./dist/bundle.js"></script> <!-- The script builded by Webpack -->
</body>
</html>